var le=Object.defineProperty;var ae=(r,t,e)=>t in r?le(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var f=(r,t,e)=>(ae(r,typeof t!="symbol"?t+"":t,e),e),mt=(r,t,e)=>{if(!t.has(r))throw TypeError("Cannot "+e)};var s=(r,t,e)=>(mt(r,t,"read from private field"),e?e.call(r):t.get(r)),o=(r,t,e)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,e)},u=(r,t,e,i)=>(mt(r,t,"write to private field"),i?i.call(r,e):t.set(r,e),e);var l=(r,t,e)=>(mt(r,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))i(h);new MutationObserver(h=>{for(const n of h)if(n.type==="childList")for(const g of n.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function e(h){const n={};return h.integrity&&(n.integrity=h.integrity),h.referrerpolicy&&(n.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?n.credentials="include":h.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(h){if(h.ep)return;h.ep=!0;const n=e(h);fetch(h.href,n)}})();class c{constructor(t,e){f(this,"x");f(this,"y");if(typeof t=="object")this.x=t.x,this.y=t.y;else if(typeof t=="number"&&e)this.x=t,this.y=e;else throw new Error("Incorrect Vector2D parameters provided")}add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}mult(t){return this.x*=t,this.y*=t,this}mag(){return Math.sqrt(this.x**2+this.y**2)}magSqr(){return this.x**2+this.y**2}same(t){return this.x===t.x&&this.y===t.y}copy(){return new c(this.x,this.y)}static add(t,e){return new c({x:t.x+e.x,y:t.y+e.y})}static sub(t,e){return new c({x:t.x-e.x,y:t.y-e.y})}static mult(t,e){return new c({x:t.x*e,y:t.y*e})}static negative(t){return new c({x:-t.x,y:-t.y})}static copy(t){return new c({x:t.x,y:t.y})}}var p,N,K,St;class ce{constructor(t){o(this,K);o(this,p,void 0);o(this,N,void 0);u(this,p,document.getElementById(t.id)),u(this,N,s(this,p).getContext("2d")),l(this,K,St).call(this,{width:t.size.width,height:t.size.height})}getCtx(){return s(this,N)}getMidPoint(){return new c({x:s(this,p).width/2,y:s(this,p).height/2})}getSize(){return{width:s(this,p).width,height:s(this,p).height}}clear(){s(this,N).clearRect(0,0,s(this,p).width,s(this,p).height)}}p=new WeakMap,N=new WeakMap,K=new WeakSet,St=function(t){s(this,p).height=t.height,s(this,p).width=t.width};var a=(r=>(r[r.Blank=0]="Blank",r[r.Barrier=1]="Barrier",r[r.Start=2]="Start",r[r.End=3]="End",r[r.Path=4]="Path",r[r.Success=5]="Success",r))(a||{}),j,v,Bt;class Tt{constructor(t=0){o(this,v);o(this,j,void 0);u(this,j,t)}draw(t,e,i){t.beginPath(),t.lineWidth=0,t.fillStyle=l(this,v,Bt).call(this),t.fillRect(e.x,e.y,i,i),t.stroke()}getType(){return s(this,j)}}j=new WeakMap,v=new WeakSet,Bt=function(){switch(s(this,j)){case 2:return"green";case 3:return"red";case 4:return"blue";case 5:return"gold";case 0:return"lightgray";default:return"black"}};var y,O,R,H,A,T,G,Ht,J,At,Q,zt,U,Wt,Z,Dt,$,Lt,V,Nt,_,jt,tt,Ot,et,It,it,Rt;class ue{constructor(t){o(this,G);o(this,J);o(this,Q);o(this,U);o(this,Z);o(this,$);o(this,V);o(this,_);o(this,tt);o(this,et);o(this,it);o(this,y,void 0);o(this,O,void 0);o(this,R,void 0);o(this,H,void 0);o(this,A,void 0);f(this,"coordToPosition");f(this,"positionToCoord");o(this,T,void 0);u(this,y,t.dimensions),u(this,O,t.topLeft),u(this,R,t.gridLines),u(this,A,t.spacing),u(this,H,t.boxes),this.coordToPosition=t.coordToPosition,this.positionToCoord=t.positionToCoord,u(this,T,[]),l(this,Q,zt).call(this)}drawLines(t){l(this,G,Ht).call(this,t)}get(t,e){return s(this,H).get(t,e)}set(t,e,i){s(this,H).set(t,e,i),s(this,T).push({x:t,y:e})}drawChanged(t){l(this,$,Lt).call(this,t)}editGrid(t){l(this,V,Nt).call(this,t)}randomiseBarriers(t){l(this,_,jt).call(this,t)}clearPath(){l(this,tt,Ot).call(this)}clearAll(){l(this,et,It).call(this)}getStart(){return l(this,it,Rt).call(this)}getDimensions(){return s(this,y)}resetChanged(){s(this,T).length=0}}y=new WeakMap,O=new WeakMap,R=new WeakMap,H=new WeakMap,A=new WeakMap,T=new WeakMap,G=new WeakSet,Ht=function(t){t.strokeStyle="gray",t.lineWidth=1,s(this,R).forEach(e=>{const i=e.get();t.beginPath(),t.moveTo(i.start.x,i.start.y),t.lineTo(i.end.x,i.end.y),t.stroke()})},J=new WeakSet,At=function(){for(let t=1;t<=s(this,y).cols;t++)for(let e=1;e<=s(this,y).rows;e++)if(this.get(t,e).getType()===a.End)return new c(t,e);throw"No End Position"},Q=new WeakSet,zt=function(){const{cols:t,rows:e}=s(this,y),i=Math.min(Math.ceil(t*.1),3),h=Math.ceil(e/2);this.set(i,h,a.Start);const n=t+1-Math.min(Math.ceil(t*.1),3),g=Math.ceil(e/2);this.set(n,g,a.End)},U=new WeakSet,Wt=function(){const t=this.getStart();this.set(t.x,t.y,a.Blank)},Z=new WeakSet,Dt=function(){const t=l(this,J,At).call(this);this.set(t.x,t.y,a.Blank)},$=new WeakSet,Lt=function(t){s(this,T).forEach(e=>{s(this,H).get(e.x,e.y).draw(t,{x:s(this,O).x+(e.x-1)*s(this,A)+1,y:s(this,O).y+(e.y-1)*s(this,A)+1},s(this,A)-2)}),s(this,T).length=0},V=new WeakSet,Nt=function(t){const e=this.positionToCoord({x:t.mouse.x,y:t.mouse.y});if(e!==null){const i=this.get(e.x,e.y).getType();i!==t.drawType&&i!==2&&i!==3&&(t.drawType===a.Start&&l(this,U,Wt).call(this),t.drawType===a.End&&l(this,Z,Dt).call(this),this.set(e.x,e.y,t.drawType))}},_=new WeakSet,jt=function(t){this.clearAll();for(let e=1;e<=s(this,y).cols;e++)for(let i=1;i<=s(this,y).rows;i++){const h=this.get(e,i).getType();if(h===a.Start||h===a.End)continue;Math.random()<t?this.set(e,i,a.Blank):this.set(e,i,a.Barrier)}},tt=new WeakSet,Ot=function(){for(let t=1;t<=s(this,y).cols;t++)for(let e=1;e<=s(this,y).rows;e++){const i=this.get(t,e).getType();(i===a.Path||i===a.Success)&&this.set(t,e,a.Blank)}},et=new WeakSet,It=function(){for(let t=1;t<=s(this,y).cols;t++)for(let e=1;e<=s(this,y).rows;e++){const i=this.get(t,e).getType();(i===a.Barrier||i===a.Path||i===a.Success)&&this.set(t,e,a.Blank)}},it=new WeakSet,Rt=function(){for(let t=1;t<=s(this,y).cols;t++)for(let e=1;e<=s(this,y).rows;e++)if(this.get(t,e).getType()===a.Start)return new c(t,e);throw"No Start Position"};var z,M,st,qt;class Et{constructor(t,e){o(this,st);o(this,z,void 0);o(this,M,void 0);u(this,z,new Array(t.cols*t.rows)),u(this,M,t),l(this,st,qt).call(this,e)}get(t,e){return s(this,z)[t+e*s(this,M).cols]}set(t,e,i){s(this,z)[t+e*s(this,M).cols]=i}}z=new WeakMap,M=new WeakMap,st=new WeakSet,qt=function(t){for(let e=0;e<s(this,M).cols*s(this,M).rows;e++)s(this,z)[e]=t};var I;class de{constructor(t){o(this,I,void 0);u(this,I,new Et(t,new Tt))}get(t,e){return s(this,I).get(t-1,e-1)}set(t,e,i){s(this,I).set(t-1,e-1,new Tt(i))}}I=new WeakMap;var q,X;class Mt{constructor(t){o(this,q,void 0);o(this,X,void 0);u(this,q,new c(t.start)),u(this,X,new c(t.end))}get(){return{start:s(this,q),end:s(this,X)}}}q=new WeakMap,X=new WeakMap;var ht,Xt,rt,Yt,ot,Ft,nt,Kt,lt,vt,at,Gt,ct,Jt,ut,Qt,dt,Ut,ft,Zt,gt,$t;class C{static create(t){return l(this,ht,Xt).call(this,t.dimensions,t.canvasSize)}}ht=new WeakSet,Xt=function(t,e){t=l(this,lt,vt).call(this,t);const i=l(this,at,Gt).call(this,e),h=l(this,ct,Jt).call(this,t,e),n=l(this,ut,Qt).call(this,t,h,i),g=l(this,dt,Ut).call(this,t,h,n),x=new de(t),oe=l(this,rt,Yt).call(this,h,n),ne=l(this,ot,Ft).call(this,h,n,t);return new ue({dimensions:t,topLeft:n,gridLines:g,boxes:x,spacing:h,coordToPosition:oe,positionToCoord:ne})},rt=new WeakSet,Yt=function(t,e){const i=t/2;return h=>({x:e.x+i+t*(h.x-1),y:e.y+i+t*(h.y-1)})},ot=new WeakSet,Ft=function(t,e,i){return h=>l(this,nt,Kt).call(this,h,e,i,t)?{x:Math.ceil((h.x-e.x)/t),y:Math.ceil((h.y-e.y)/t)}:null},nt=new WeakSet,Kt=function(t,e,i,h){return t.x>e.x&&t.y>e.y&&t.x<e.x+i.cols*h&&t.y<e.y+i.rows*h},lt=new WeakSet,vt=function(t){return{cols:Math.min(t.cols,300),rows:Math.min(t.rows,180)}},at=new WeakSet,Gt=function(t){return new c(t.width/2,t.height/2)},ct=new WeakSet,Jt=function(t,e,i=.99){const h=Math.ceil(e.width*i),n=Math.ceil(e.height*i),g=Math.ceil((h-t.cols)/t.cols),x=Math.ceil((n-t.rows)/t.rows);return Math.min(g,x)},ut=new WeakSet,Qt=function(t,e,i){return new c({x:Math.round(i.x-t.cols*e/2),y:Math.round(i.y-t.rows*e/2)})},dt=new WeakSet,Ut=function(t,e,i){const h=[],n=l(this,gt,$t).call(this,t,e),g=l(this,ft,Zt).call(this,t,e);for(let x=0;x<=t.cols;x++)h.push(new Mt({start:new c({x:i.x+x*e,y:i.y}),end:new c({x:i.x+x*e,y:i.y+n})}));for(let x=0;x<=t.rows;x++)h.push(new Mt({start:new c({x:i.x,y:i.y+x*e}),end:new c({x:i.x+g,y:i.y+x*e})}));return h},ft=new WeakSet,Zt=function(t,e){return t.cols*e},gt=new WeakSet,$t=function(t,e){return t.rows*e},o(C,ht),o(C,rt),o(C,ot),o(C,nt),o(C,lt),o(C,at),o(C,ct),o(C,ut),o(C,dt),o(C,ft),o(C,gt);class fe{constructor(){f(this,"mouse");f(this,"drawType");f(this,"createPath");f(this,"frame");f(this,"resetPath");f(this,"resetAll");f(this,"randomise");f(this,"diagonals");this.mouse={x:0,y:0,leftClick:!1},this.drawType=a.Blank,this.createPath=!1,this.frame=0,this.resetPath=!1,this.resetAll=!1,this.randomise=!1,this.diagonals=!1}updateMousePosition(t){this.mouse.x=t.clientX,this.mouse.y=t.clientY}incrementFrame(){this.frame++}}var P,m,W,Y,b,wt,Vt,yt,_t,xt,te;class ge{constructor(t){o(this,wt);o(this,yt);o(this,xt);o(this,P,void 0);o(this,m,void 0);o(this,W,void 0);o(this,Y,void 0);o(this,b,void 0);u(this,P,new Et(t,0)),u(this,m,!1),u(this,W,!1),u(this,Y,t),u(this,b,[])}createNextStep(t,e){if(!s(this,W)){const n=t.getStart();s(this,P).set(n.x-1,n.y-1,1),s(this,b).push(n),u(this,W,!0)}const i=[],h=l(this,xt,te).call(this,e);s(this,b).forEach(n=>{s(this,m)||h.forEach(g=>{l(this,wt,Vt).call(this,t,n.copy(),c.add(n,g),i)})}),s(this,m)?s(this,b).length=0:u(this,b,i)}reset(){u(this,P,new Et(s(this,Y),0)),u(this,m,!1),s(this,b).length=0,u(this,W,!1)}noPath(){return s(this,b).length===0&&!s(this,m)}pathFound(){return s(this,m)}}P=new WeakMap,m=new WeakMap,W=new WeakMap,Y=new WeakMap,b=new WeakMap,wt=new WeakSet,Vt=function(t,e,i,h){if(s(this,P).get(i.x-1,i.y-1)!==0)return;const n=l(this,yt,_t).call(this,t,i);if(n===1){s(this,P).set(i.x-1,i.y-1,e),t.set(i.x,i.y,a.Path),h.push(i);return}else if(n===2){u(this,m,!0);let g=e;for(;s(this,P).get(g.x-1,g.y-1)!==1;)t.set(g.x,g.y,a.Success),g=s(this,P).get(g.x-1,g.y-1)}},yt=new WeakSet,_t=function(t,e){return e.x<1||e.x>t.getDimensions().cols||e.y<1||e.y>t.getDimensions().rows?0:t.get(e.x,e.y).getType()===a.Blank?1:t.get(e.x,e.y).getType()===a.End?2:0},xt=new WeakSet,te=function(t){const e=[{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:0}];return t&&e.push({x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1}),e};var pt,ee,Ct,ie,kt,se;class E{constructor(t){o(this,pt);o(this,Ct);o(this,kt);f(this,"size");f(this,"position");f(this,"text");f(this,"fillColour");f(this,"strokeColour");f(this,"selected");f(this,"action");f(this,"update");this.size=t.size,this.position=t.position,this.text=t.text,this.fillColour=t.fillColour,this.selected=t.selected,this.action=t.action,this.update=t.update,this.strokeColour="black",this.update()}draw(t){l(this,pt,ee).call(this,t),l(this,Ct,ie).call(this,t)}checkClick(t){l(this,kt,se).call(this,t)&&this.action()}}pt=new WeakSet,ee=function(t){t.beginPath(),t.fillStyle=this.fillColour,t.fillRect(this.position.x,this.position.y,this.size.width,this.size.height),t.stroke(),t.lineWidth=2,t.strokeStyle=this.strokeColour,t.strokeRect(this.position.x,this.position.y,this.size.width,this.size.height),t.stroke()},Ct=new WeakSet,ie=function(t){t.font="30px Arial",t.fillStyle="black",t.textAlign="center",t.fillText(this.text,this.position.x+this.size.width/2,this.position.y+this.size.height*.7)},kt=new WeakSet,se=function(t){return t.x>this.position.x&&t.x<this.position.x+this.size.width&&t.y>this.position.y&&t.y<this.position.y+this.size.height};var Pt,he;const w=class{static setup(t,e){const i=[];return i.push(new E({size:{width:w.buttonWidth,height:w.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Begin",fillColour:"gray",selected:!1,action:function(){e.createPath=!e.createPath,this.update()},update:function(){e.createPath?(this.text="Pause",this.strokeColour="white",this.fillColour="darkgray"):(this.text="Begin",this.strokeColour="black",this.fillColour="gray")}})),i.push(new E({size:{width:w.buttonWidth,height:w.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Clear Path",fillColour:"gray",selected:!1,action:function(){e.resetPath=!0},update:function(){}})),i.push(new E({size:{width:w.buttonWidth,height:w.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Clear All",fillColour:"gray",selected:!1,action:function(){e.resetAll=!0},update:function(){}})),i.push(new E({size:{width:w.buttonWidth,height:w.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Place Start",fillColour:"green",selected:!1,action:function(){this.selected=!0,e.drawType=a.Start,this.update()},update:function(){this.strokeColour=this.selected?"white":"black",this.fillColour=this.selected?"lightgreen":"green",this.selected&&i.forEach(h=>{this!==h&&(h.selected=!1,h.update())})}})),i.push(new E({size:{width:w.buttonWidth,height:w.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Place End",fillColour:"red",selected:!1,action:function(){this.selected=!0,e.drawType=a.End,this.update()},update:function(){this.strokeColour=this.selected?"white":"black",this.fillColour=this.selected?"#FF6060":"red",this.selected&&i.forEach(h=>{this!==h&&(h.selected=!1,h.update())})}})),i.push(new E({size:{width:w.buttonWidth,height:w.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Draw Barriers",fillColour:"gray",selected:!1,action:function(){this.selected=!0,e.drawType=a.Barrier,this.update()},update:function(){this.strokeColour=this.selected?"white":"black",this.fillColour=this.selected?"darkgray":"gray",this.selected&&i.forEach(h=>{this!==h&&(h.selected=!1,h.update())})}})),i[i.length-1].action(),i.push(new E({size:{width:w.buttonWidth,height:w.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Erase Barriers",fillColour:"gray",selected:!1,action:function(){this.selected=!0,e.drawType=a.Blank,this.update()},update:function(){this.strokeColour=this.selected?"white":"black",this.fillColour=this.selected?"darkgray":"gray",this.selected&&i.forEach(h=>{this!==h&&(h.selected=!1,h.update())})}})),i.push(new E({size:{width:w.buttonWidth,height:w.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Randomise",fillColour:"gray",selected:!1,action:function(){e.randomise=!0},update:function(){}})),i.push(new E({size:{width:w.buttonWidth,height:w.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Diagonals",fillColour:"gray",selected:!1,action:function(){e.diagonals=!e.diagonals,this.update()},update:function(){e.diagonals?(this.strokeColour="white",this.fillColour="darkgray"):(this.strokeColour="black",this.fillColour="gray")}})),l(this,Pt,he).call(this,i,t),i}};let B=w;Pt=new WeakSet,he=function(t,e){const i=Math.floor(e.height/2),h=t.length/2,n=w.buttonHeight+w.offset;t.forEach((g,x)=>{g.position.y=i-(h-x)*n})},o(B,Pt),f(B,"buttonHeight",50),f(B,"buttonWidth",200),f(B,"offset",10);var D;class we{constructor(t,e){o(this,D,void 0);u(this,D,B.setup(t,e))}updateButtons(){s(this,D).forEach(t=>{t.update()})}drawButtons(t){s(this,D).forEach(e=>{e.draw(t)})}checkClick(t){s(this,D).forEach(e=>{e.checkClick(t)})}}D=new WeakMap;function ye(r,t){document.addEventListener("mousedown",()=>{t()}),document.addEventListener("mouseup",()=>{r.mouse.leftClick=!1}),document.addEventListener("mousemove",e=>{r.updateMousePosition(e)})}const L=new ce({size:{height:innerHeight,width:innerWidth},id:"canvas"}),d=new fe,k=C.create({dimensions:{cols:150,rows:90},canvasSize:{width:L.getSize().width-250,height:L.getSize().height}}),S=new ge(k.getDimensions()),F=new we(L.getSize(),d);function xe(){L.clear(),k.drawLines(L.getCtx())}function re(){if(d.randomise){const r=d.diagonals?.44:.62;for(bt(),k.randomiseBarriers(r);!Ce(k);)S.reset(),k.resetChanged(),k.randomiseBarriers(r);d.randomise=!1,d.resetPath=!0}d.mouse.leftClick&&!d.createPath&&!S.pathFound()&&k.editGrid(d),d.resetPath&&(k.clearPath(),bt(),d.resetPath=!1),d.resetAll&&(k.clearAll(),bt(),d.resetAll=!1),d.frame%5===0&&(d.createPath&&(S.pathFound()?(d.createPath=!1,F.updateButtons()):S.createNextStep(k,d.diagonals)),k.drawChanged(L.getCtx()),F.drawButtons(L.getCtx())),d.incrementFrame(),requestAnimationFrame(re)}function bt(){S.reset(),d.createPath=!1,F.updateButtons()}function pe(){k.positionToCoord(d.mouse)!==null?d.mouse.leftClick=!0:F.checkClick(d.mouse)}function Ce(r){for(d.createPath=!0;!S.pathFound();)if(S.createNextStep(r,d.diagonals),S.noPath())return!1;return d.createPath=!1,!0}ye(d,pe);xe();re();
