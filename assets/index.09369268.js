var ce=Object.defineProperty;var de=(r,t,e)=>t in r?ce(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var g=(r,t,e)=>(de(r,typeof t!="symbol"?t+"":t,e),e),Pt=(r,t,e)=>{if(!t.has(r))throw TypeError("Cannot "+e)};var s=(r,t,e)=>(Pt(r,t,"read from private field"),e?e.call(r):t.get(r)),o=(r,t,e)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,e)},u=(r,t,e,i)=>(Pt(r,t,"write to private field"),i?i.call(r,e):t.set(r,e),e);var l=(r,t,e)=>(Pt(r,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))i(h);new MutationObserver(h=>{for(const n of h)if(n.type==="childList")for(const w of n.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&i(w)}).observe(document,{childList:!0,subtree:!0});function e(h){const n={};return h.integrity&&(n.integrity=h.integrity),h.referrerpolicy&&(n.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?n.credentials="include":h.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(h){if(h.ep)return;h.ep=!0;const n=e(h);fetch(h.href,n)}})();class c{constructor(t,e){g(this,"x");g(this,"y");if(typeof t=="object")this.x=t.x,this.y=t.y;else if(typeof t=="number"&&e)this.x=t,this.y=e;else throw new Error("Incorrect Vector2D parameters provided")}add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}mult(t){return this.x*=t,this.y*=t,this}mag(){return Math.sqrt(this.x**2+this.y**2)}magSqr(){return this.x**2+this.y**2}same(t){return this.x===t.x&&this.y===t.y}copy(){return new c(this.x,this.y)}static add(t,e){return new c({x:t.x+e.x,y:t.y+e.y})}static sub(t,e){return new c({x:t.x-e.x,y:t.y-e.y})}static mult(t,e){return new c({x:t.x*e,y:t.y*e})}static negative(t){return new c({x:-t.x,y:-t.y})}static copy(t){return new c({x:t.x,y:t.y})}}var k,N,F,Mt;class ue{constructor(t){o(this,F);o(this,k,void 0);o(this,N,void 0);u(this,k,document.getElementById(t.id)),u(this,N,s(this,k).getContext("2d")),l(this,F,Mt).call(this,{width:t.size.width,height:t.size.height})}getCtx(){return s(this,N)}getMidPoint(){return new c({x:s(this,k).width/2,y:s(this,k).height/2})}getSize(){return{width:s(this,k).width,height:s(this,k).height}}clear(){s(this,N).clearRect(0,0,s(this,k).width,s(this,k).height)}}k=new WeakMap,N=new WeakMap,F=new WeakSet,Mt=function(t){s(this,k).height=t.height,s(this,k).width=t.width};var d=(r=>(r[r.Blank=0]="Blank",r[r.Barrier=1]="Barrier",r[r.Start=2]="Start",r[r.End=3]="End",r[r.Path=4]="Path",r[r.Success=5]="Success",r))(d||{}),j,K,zt;class St{constructor(t=0){o(this,K);o(this,j,void 0);u(this,j,t)}draw(t,e,i){t.beginPath(),t.lineWidth=0,t.fillStyle=l(this,K,zt).call(this),t.fillRect(e.x,e.y,i,i),t.stroke()}getType(){return s(this,j)}}j=new WeakMap,K=new WeakSet,zt=function(){switch(s(this,j)){case 2:return"green";case 3:return"red";case 4:return"blue";case 5:return"gold";case 0:return"lightgray";default:return"black"}};var y,O,q,B,A,M,G,Ht,J,Bt,Q,At,U,Wt,Z,Dt,v,Lt,V,Nt,_,jt,tt,Ot,et,It,it,Rt;class fe{constructor(t){o(this,G);o(this,J);o(this,Q);o(this,U);o(this,Z);o(this,v);o(this,V);o(this,_);o(this,tt);o(this,et);o(this,it);o(this,y,void 0);o(this,O,void 0);o(this,q,void 0);o(this,B,void 0);o(this,A,void 0);g(this,"coordToPosition");g(this,"positionToCoord");o(this,M,void 0);u(this,y,t.dimensions),u(this,O,t.topLeft),u(this,q,t.gridLines),u(this,A,t.spacing),u(this,B,t.boxes),this.coordToPosition=t.coordToPosition,this.positionToCoord=t.positionToCoord,u(this,M,[]),l(this,Q,At).call(this)}drawLines(t){l(this,G,Ht).call(this,t)}get(t,e){return s(this,B).get(t,e)}set(t,e,i){s(this,B).set(t,e,i),s(this,M).push({x:t,y:e})}drawChanged(t){l(this,v,Lt).call(this,t)}editGrid(t){l(this,V,Nt).call(this,t)}randomiseBarriers(t){l(this,_,jt).call(this,t)}clearPath(){l(this,tt,Ot).call(this)}clearAll(){l(this,et,It).call(this)}getStart(){return l(this,it,Rt).call(this)}getDimensions(){return s(this,y)}resetChanged(){s(this,M).length=0}}y=new WeakMap,O=new WeakMap,q=new WeakMap,B=new WeakMap,A=new WeakMap,M=new WeakMap,G=new WeakSet,Ht=function(t){t.strokeStyle="gray",t.lineWidth=1,s(this,q).forEach(e=>{const i=e.get();t.beginPath(),t.moveTo(i.start.x,i.start.y),t.lineTo(i.end.x,i.end.y),t.stroke()})},J=new WeakSet,Bt=function(){for(let t=1;t<=s(this,y).cols;t++)for(let e=1;e<=s(this,y).rows;e++)if(this.get(t,e).getType()===d.End)return new c(t,e);throw"No End Position"},Q=new WeakSet,At=function(){const{cols:t,rows:e}=s(this,y),i=Math.min(Math.ceil(t*.1),3),h=Math.ceil(e/2);this.set(i,h,d.Start);const n=t+1-Math.min(Math.ceil(t*.1),3),w=Math.ceil(e/2);this.set(n,w,d.End)},U=new WeakSet,Wt=function(){const t=this.getStart();this.set(t.x,t.y,d.Blank)},Z=new WeakSet,Dt=function(){const t=l(this,J,Bt).call(this);this.set(t.x,t.y,d.Blank)},v=new WeakSet,Lt=function(t){s(this,M).forEach(e=>{s(this,B).get(e.x,e.y).draw(t,{x:s(this,O).x+(e.x-1)*s(this,A)+1,y:s(this,O).y+(e.y-1)*s(this,A)+1},s(this,A)-2)}),s(this,M).length=0},V=new WeakSet,Nt=function(t){const e=this.positionToCoord({x:t.mouse.x,y:t.mouse.y});if(e!==null){const i=this.get(e.x,e.y).getType();i!==t.drawType&&i!==2&&i!==3&&(t.drawType===d.Start&&l(this,U,Wt).call(this),t.drawType===d.End&&l(this,Z,Dt).call(this),this.set(e.x,e.y,t.drawType))}},_=new WeakSet,jt=function(t){this.clearAll();for(let e=1;e<=s(this,y).cols;e++)for(let i=1;i<=s(this,y).rows;i++){const h=this.get(e,i).getType();if(h===d.Start||h===d.End)continue;Math.random()<t?this.set(e,i,d.Blank):this.set(e,i,d.Barrier)}},tt=new WeakSet,Ot=function(){for(let t=1;t<=s(this,y).cols;t++)for(let e=1;e<=s(this,y).rows;e++){const i=this.get(t,e).getType();(i===d.Path||i===d.Success)&&this.set(t,e,d.Blank)}},et=new WeakSet,It=function(){for(let t=1;t<=s(this,y).cols;t++)for(let e=1;e<=s(this,y).rows;e++){const i=this.get(t,e).getType();(i===d.Barrier||i===d.Path||i===d.Success)&&this.set(t,e,d.Blank)}},it=new WeakSet,Rt=function(){for(let t=1;t<=s(this,y).cols;t++)for(let e=1;e<=s(this,y).rows;e++)if(this.get(t,e).getType()===d.Start)return new c(t,e);throw"No Start Position"};var W,z,st,qt;class Et{constructor(t,e){o(this,st);o(this,W,void 0);o(this,z,void 0);u(this,W,new Array(t.cols*t.rows)),u(this,z,t),l(this,st,qt).call(this,e)}get(t,e){return s(this,W)[t+e*s(this,z).cols]}set(t,e,i){s(this,W)[t+e*s(this,z).cols]=i}}W=new WeakMap,z=new WeakMap,st=new WeakSet,qt=function(t){for(let e=0;e<s(this,z).cols*s(this,z).rows;e++)s(this,W)[e]=t};var I;class ge{constructor(t){o(this,I,void 0);u(this,I,new Et(t,new St))}get(t,e){return s(this,I).get(t-1,e-1)}set(t,e,i){s(this,I).set(t-1,e-1,new St(i))}}I=new WeakMap;var $,X;class Tt{constructor(t){o(this,$,void 0);o(this,X,void 0);u(this,$,new c(t.start)),u(this,X,new c(t.end))}get(){return{start:s(this,$),end:s(this,X)}}}$=new WeakMap,X=new WeakMap;var ht,$t,rt,Xt,ot,Yt,nt,Ft,lt,Kt,at,Gt,ct,Jt,dt,Qt,ut,Ut,ft,Zt,gt,vt;class C{static create(t){return l(this,ht,$t).call(this,t.dimensions,t.canvasSize)}}ht=new WeakSet,$t=function(t,e){t=l(this,lt,Kt).call(this,t);const i=l(this,at,Gt).call(this,e),h=l(this,ct,Jt).call(this,t,e),n=l(this,dt,Qt).call(this,t,h,i),w=l(this,ut,Ut).call(this,t,h,n),x=new ge(t),le=l(this,rt,Xt).call(this,h,n),ae=l(this,ot,Yt).call(this,h,n,t);return new fe({dimensions:t,topLeft:n,gridLines:w,boxes:x,spacing:h,coordToPosition:le,positionToCoord:ae})},rt=new WeakSet,Xt=function(t,e){const i=t/2;return h=>({x:e.x+i+t*(h.x-1),y:e.y+i+t*(h.y-1)})},ot=new WeakSet,Yt=function(t,e,i){return h=>l(this,nt,Ft).call(this,h,e,i,t)?{x:Math.ceil((h.x-e.x)/t),y:Math.ceil((h.y-e.y)/t)}:null},nt=new WeakSet,Ft=function(t,e,i,h){return t.x>e.x&&t.y>e.y&&t.x<e.x+i.cols*h&&t.y<e.y+i.rows*h},lt=new WeakSet,Kt=function(t){return{cols:Math.min(t.cols,300),rows:Math.min(t.rows,180)}},at=new WeakSet,Gt=function(t){return new c(t.width/2,t.height/2)},ct=new WeakSet,Jt=function(t,e,i=.99){const h=Math.ceil(e.width*i),n=Math.ceil(e.height*i),w=Math.ceil((h-t.cols)/t.cols),x=Math.ceil((n-t.rows)/t.rows);return Math.min(w,x)},dt=new WeakSet,Qt=function(t,e,i){return new c({x:Math.round(i.x-t.cols*e/2),y:Math.round(i.y-t.rows*e/2)})},ut=new WeakSet,Ut=function(t,e,i){const h=[],n=l(this,gt,vt).call(this,t,e),w=l(this,ft,Zt).call(this,t,e);for(let x=0;x<=t.cols;x++)h.push(new Tt({start:new c({x:i.x+x*e,y:i.y}),end:new c({x:i.x+x*e,y:i.y+n})}));for(let x=0;x<=t.rows;x++)h.push(new Tt({start:new c({x:i.x,y:i.y+x*e}),end:new c({x:i.x+w,y:i.y+x*e})}));return h},ft=new WeakSet,Zt=function(t,e){return t.cols*e},gt=new WeakSet,vt=function(t,e){return t.rows*e},o(C,ht),o(C,rt),o(C,ot),o(C,nt),o(C,lt),o(C,at),o(C,ct),o(C,dt),o(C,ut),o(C,ft),o(C,gt);class we{constructor({cols:t,rows:e}){g(this,"mouse");g(this,"grid");g(this,"drawType");g(this,"createPath");g(this,"frame");g(this,"resetPath");g(this,"resetAll");g(this,"randomise");g(this,"diagonals");this.mouse={x:0,y:0,leftClick:!1},this.grid={cols:t,rows:e,changed:!1},this.drawType=d.Blank,this.createPath=!1,this.frame=0,this.resetPath=!1,this.resetAll=!1,this.randomise=!1,this.diagonals=!1}updateMousePosition(t){this.mouse.x=t.clientX,this.mouse.y=t.clientY}incrementFrame(){this.frame++}}var P,b,D,Y,E,wt,_t,yt,te,xt,ee;class Vt{constructor(t){o(this,wt);o(this,yt);o(this,xt);o(this,P,void 0);o(this,b,void 0);o(this,D,void 0);o(this,Y,void 0);o(this,E,void 0);u(this,P,new Et(t,0)),u(this,b,!1),u(this,D,!1),u(this,Y,t),u(this,E,[])}createNextStep(t,e){if(!s(this,D)){const n=t.getStart();s(this,P).set(n.x-1,n.y-1,1),s(this,E).push(n),u(this,D,!0)}const i=[],h=l(this,xt,ee).call(this,e);s(this,E).forEach(n=>{s(this,b)||h.forEach(w=>{l(this,wt,_t).call(this,t,n.copy(),c.add(n,w),i)})}),s(this,b)?s(this,E).length=0:u(this,E,i)}reset(){u(this,P,new Et(s(this,Y),0)),u(this,b,!1),s(this,E).length=0,u(this,D,!1)}noPath(){return s(this,E).length===0&&!s(this,b)}pathFound(){return s(this,b)}}P=new WeakMap,b=new WeakMap,D=new WeakMap,Y=new WeakMap,E=new WeakMap,wt=new WeakSet,_t=function(t,e,i,h){if(s(this,P).get(i.x-1,i.y-1)!==0)return;const n=l(this,yt,te).call(this,t,i);if(n===1){s(this,P).set(i.x-1,i.y-1,e),t.set(i.x,i.y,d.Path),h.push(i);return}else if(n===2){u(this,b,!0);let w=e;for(;s(this,P).get(w.x-1,w.y-1)!==1;)t.set(w.x,w.y,d.Success),w=s(this,P).get(w.x-1,w.y-1)}},yt=new WeakSet,te=function(t,e){return e.x<1||e.x>t.getDimensions().cols||e.y<1||e.y>t.getDimensions().rows?0:t.get(e.x,e.y).getType()===d.Blank?1:t.get(e.x,e.y).getType()===d.End?2:0},xt=new WeakSet,ee=function(t){const e=[{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:0}];return t&&e.push({x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1}),e};var pt,ie,Ct,se,kt,he;class m{constructor(t){o(this,pt);o(this,Ct);o(this,kt);g(this,"size");g(this,"position");g(this,"text");g(this,"fillColour");g(this,"strokeColour");g(this,"selected");g(this,"action");g(this,"update");this.size=t.size,this.position=t.position,this.text=t.text,this.fillColour=t.fillColour,this.selected=t.selected,this.action=t.action,this.update=t.update,this.strokeColour="black",this.update()}draw(t){l(this,pt,ie).call(this,t),l(this,Ct,se).call(this,t)}checkClick(t){l(this,kt,he).call(this,t)&&this.action()}}pt=new WeakSet,ie=function(t){t.beginPath(),t.fillStyle=this.fillColour,t.fillRect(this.position.x,this.position.y,this.size.width,this.size.height),t.stroke(),t.lineWidth=2,t.strokeStyle=this.strokeColour,t.strokeRect(this.position.x,this.position.y,this.size.width,this.size.height),t.stroke()},Ct=new WeakSet,se=function(t){t.font="30px Arial",t.fillStyle="black",t.textAlign="center",t.fillText(this.text,this.position.x+this.size.width/2,this.position.y+this.size.height*.7)},kt=new WeakSet,he=function(t){return t.x>this.position.x&&t.x<this.position.x+this.size.width&&t.y>this.position.y&&t.y<this.position.y+this.size.height};var mt,re;const f=class{static setup(t,e){const i=[];return i.push(new m({size:{width:f.buttonWidth,height:f.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Begin",fillColour:"gray",selected:!1,action:function(){e.createPath=!e.createPath,this.update()},update:function(){e.createPath?(this.text="Pause",this.strokeColour="white",this.fillColour="darkgray"):(this.text="Begin",this.strokeColour="black",this.fillColour="gray")}})),i.push(new m({size:{width:f.buttonWidth,height:f.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Clear Path",fillColour:"gray",selected:!1,action:function(){e.resetPath=!0},update:function(){}})),i.push(new m({size:{width:f.buttonWidth,height:f.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Clear All",fillColour:"gray",selected:!1,action:function(){e.resetAll=!0},update:function(){}})),i.push(new m({size:{width:f.buttonWidth,height:f.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Place Start",fillColour:"green",selected:!1,action:function(){this.selected=!0,e.drawType=d.Start,this.update()},update:function(){this.strokeColour=this.selected?"white":"black",this.fillColour=this.selected?"lightgreen":"green",this.selected&&i.forEach(h=>{this!==h&&(h.selected=!1,h.update())})}})),i.push(new m({size:{width:f.buttonWidth,height:f.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Place End",fillColour:"red",selected:!1,action:function(){this.selected=!0,e.drawType=d.End,this.update()},update:function(){this.strokeColour=this.selected?"white":"black",this.fillColour=this.selected?"#FF6060":"red",this.selected&&i.forEach(h=>{this!==h&&(h.selected=!1,h.update())})}})),i.push(new m({size:{width:f.buttonWidth,height:f.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Draw Barriers",fillColour:"gray",selected:!1,action:function(){this.selected=!0,e.drawType=d.Barrier,this.update()},update:function(){this.strokeColour=this.selected?"white":"black",this.fillColour=this.selected?"darkgray":"gray",this.selected&&i.forEach(h=>{this!==h&&(h.selected=!1,h.update())})}})),i[i.length-1].action(),i.push(new m({size:{width:f.buttonWidth,height:f.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Erase Barriers",fillColour:"gray",selected:!1,action:function(){this.selected=!0,e.drawType=d.Blank,this.update()},update:function(){this.strokeColour=this.selected?"white":"black",this.fillColour=this.selected?"darkgray":"gray",this.selected&&i.forEach(h=>{this!==h&&(h.selected=!1,h.update())})}})),i.push(new m({size:{width:f.buttonWidth,height:f.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Randomise",fillColour:"gray",selected:!1,action:function(){e.randomise=!0},update:function(){}})),i.push(new m({size:{width:f.buttonWidth,height:f.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Diagonals",fillColour:"gray",selected:!1,action:function(){e.diagonals=!e.diagonals,this.update()},update:function(){e.diagonals?(this.strokeColour="white",this.fillColour="darkgray"):(this.strokeColour="black",this.fillColour="gray")}})),i.push(new m({size:{width:f.buttonWidth,height:f.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Size",fillColour:"gray",selected:!1,action:function(){},update:function(){}})),i.push(new m({size:{width:f.buttonWidth,height:f.buttonHeight},position:new c({x:t.width-240,y:0}),text:`-  ${e.grid.cols}x${e.grid.rows}  +`,fillColour:"gray",selected:!1,action:function(){e.mouse.x>=this.position.x+this.size.width/2?e.grid.cols<300&&(e.grid.cols+=15,e.grid.rows+=9,e.grid.changed=!0):e.grid.cols>15&&(e.grid.cols-=15,e.grid.rows-=9,e.grid.changed=!0),this.update()},update:function(){this.text=`-  ${e.grid.cols}x${e.grid.rows}  +`}})),l(this,mt,re).call(this,i,t),i}};let H=f;mt=new WeakSet,re=function(t,e){const i=Math.floor(e.height/2),h=t.length/2,n=f.buttonHeight+f.offset;t.forEach((w,x)=>{w.position.y=i-(h-x)*n})},o(H,mt),g(H,"buttonHeight",50),g(H,"buttonWidth",200),g(H,"offset",10);var L;class ye{constructor(t,e){o(this,L,void 0);u(this,L,H.setup(t,e))}updateButtons(){s(this,L).forEach(t=>{t.update()})}drawButtons(t){s(this,L).forEach(e=>{e.draw(t)})}checkClick(t){s(this,L).forEach(e=>{e.checkClick(t)})}}L=new WeakMap;function xe(r,t){document.addEventListener("mousedown",()=>{t()}),document.addEventListener("mouseup",()=>{r.mouse.leftClick=!1}),document.addEventListener("mousemove",e=>{r.updateMousePosition(e)})}const S=new ue({size:{height:innerHeight,width:innerWidth},id:"canvas"}),a=new we({cols:150,rows:90});let p=C.create({dimensions:{cols:a.grid.cols,rows:a.grid.rows},canvasSize:{width:S.getSize().width-250,height:S.getSize().height}}),T=new Vt(p.getDimensions());const R=new ye(S.getSize(),a);function oe(){S.clear(),p.drawLines(S.getCtx())}function ne(){if(a.grid.changed&&(p=C.create({dimensions:{cols:a.grid.cols,rows:a.grid.rows},canvasSize:{width:S.getSize().width-250,height:S.getSize().height}}),T=new Vt(p.getDimensions()),a.grid.changed=!1,oe(),R.drawButtons(S.getCtx())),a.randomise){const r=a.diagonals?.44:.62;for(bt(),p.randomiseBarriers(r);!Ce(p);)T.reset(),p.resetChanged(),p.randomiseBarriers(r);a.randomise=!1,a.resetPath=!0}a.mouse.leftClick&&!a.createPath&&!T.pathFound&&p.editGrid(a),a.resetPath&&(p.clearPath(),bt(),a.resetPath=!1),a.resetAll&&(p.clearAll(),bt(),a.resetAll=!1),a.frame%5===0&&(a.createPath&&(T.pathFound()?(a.createPath=!1,R.updateButtons()):T.createNextStep(p,a.diagonals)),p.drawChanged(S.getCtx()),R.drawButtons(S.getCtx())),a.incrementFrame(),requestAnimationFrame(ne)}function bt(){T.reset(),a.createPath=!1,R.updateButtons()}function pe(){p.positionToCoord(a.mouse)!==null?a.mouse.leftClick=!0:R.checkClick(a.mouse)}function Ce(r){for(a.createPath=!0;!T.pathFound;)if(T.createNextStep(r,a.diagonals),T.noPath())return!1;return a.createPath=!1,!0}xe(a,pe);oe();ne();
