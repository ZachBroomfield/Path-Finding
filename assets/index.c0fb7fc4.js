var Jt=Object.defineProperty;var Qt=(h,t,e)=>t in h?Jt(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var o=(h,t,e)=>(Qt(h,typeof t!="symbol"?t+"":t,e),e),rt=(h,t,e)=>{if(!t.has(h))throw TypeError("Cannot "+e)};var y=(h,t,e)=>(rt(h,t,"read from private field"),e?e.call(h):t.get(h)),r=(h,t,e)=>{if(t.has(h))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(h):t.set(h,e)},b=(h,t,e,i)=>(rt(h,t,"write to private field"),i?i.call(h,e):t.set(h,e),e);var l=(h,t,e)=>(rt(h,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();class c{constructor(t,e){o(this,"x");o(this,"y");if(typeof t=="object")this.x=t.x,this.y=t.y;else if(typeof t=="number"&&e)this.x=t,this.y=e;else throw new Error("Incorrect Vector2D parameters provided")}add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}mult(t){return this.x*=t,this.y*=t,this}mag(){return Math.sqrt(this.x**2+this.y**2)}magSqr(){return this.x**2+this.y**2}same(t){return this.x===t.x&&this.y===t.y}copy(){return new c(this.x,this.y)}static add(t,e){return new c({x:t.x+e.x,y:t.y+e.y})}static sub(t,e){return new c({x:t.x-e.x,y:t.y-e.y})}static mult(t,e){return new c({x:t.x*e,y:t.y*e})}static negative(t){return new c({x:-t.x,y:-t.y})}static copy(t){return new c({x:t.x,y:t.y})}}var H,dt;class Ut{constructor(t){r(this,H);o(this,"canvas");o(this,"ctx");this.canvas=document.getElementById(t.id),this.ctx=this.canvas.getContext("2d"),l(this,H,dt).call(this,{width:t.size.width,height:t.size.height})}getCtx(){return this.ctx}getMidPoint(){return new c({x:this.canvas.width/2,y:this.canvas.height/2})}getSize(){return{width:this.canvas.width,height:this.canvas.height}}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}}H=new WeakSet,dt=function(t){this.canvas.height=t.height,this.canvas.width=t.width};var d=(h=>(h[h.Blank=0]="Blank",h[h.Barrier=1]="Barrier",h[h.Start=2]="Start",h[h.End=3]="End",h[h.Path=4]="Path",h[h.Success=5]="Success",h))(d||{}),B,ut;class at{constructor(t=0){r(this,B);o(this,"type");this.type=t}draw(t,e,i){t.beginPath(),t.lineWidth=0,t.fillStyle=l(this,B,ut).call(this),t.fillRect(e.x,e.y,i,i),t.stroke()}}B=new WeakSet,ut=function(){switch(this.type){case 2:return"green";case 3:return"red";case 4:return"blue";case 5:return"gold";case 0:return"lightgray";default:return"black"}};var A,ft,W,gt,T,wt,L,yt,v,xt,N,pt,j,Ct,F,mt,O,kt,D,bt,I,Pt;class Zt{constructor(t){r(this,A);r(this,W);r(this,T);r(this,L);r(this,v);r(this,N);r(this,j);r(this,F);r(this,O);r(this,D);r(this,I);o(this,"dimensions");o(this,"topLeft");o(this,"gridLines");o(this,"boxes");o(this,"spacing");o(this,"coordToPosition");o(this,"positionToCoord");o(this,"changed");this.dimensions=t.dimensions,this.topLeft=t.topLeft,this.gridLines=t.gridLines,this.spacing=t.spacing,this.boxes=t.boxes,this.coordToPosition=t.coordToPosition,this.positionToCoord=t.positionToCoord,this.changed=[],l(this,T,wt).call(this)}drawLines(t){l(this,A,ft).call(this,t)}get(t,e){return this.boxes.get(t,e)}set(t,e,i){this.boxes.set(t,e,i),this.changed.push({x:t,y:e})}drawChanged(t){l(this,N,pt).call(this,t)}editGrid(t){l(this,j,Ct).call(this,t)}randomiseBarriers(t){l(this,F,mt).call(this,t)}clearPath(){l(this,O,kt).call(this)}clearAll(){l(this,D,bt).call(this)}getStart(){return l(this,I,Pt).call(this)}resetChanged(){this.changed.length=0}}A=new WeakSet,ft=function(t){t.strokeStyle="gray",t.lineWidth=1,this.gridLines.forEach(e=>{t.beginPath(),t.moveTo(e.start.x,e.start.y),t.lineTo(e.end.x,e.end.y),t.stroke()})},W=new WeakSet,gt=function(){for(let t=1;t<=this.dimensions.cols;t++)for(let e=1;e<=this.dimensions.rows;e++)if(this.get(t,e).type===d.End)return new c(t,e);throw"No End Position"},T=new WeakSet,wt=function(){const{cols:t,rows:e}=this.dimensions,i=Math.min(Math.ceil(t*.1),3),s=Math.ceil(e/2);this.set(i,s,d.Start);const n=t+1-Math.min(Math.ceil(t*.1),3),f=Math.ceil(e/2);this.set(n,f,d.End)},L=new WeakSet,yt=function(){const t=this.getStart();this.set(t.x,t.y,d.Blank)},v=new WeakSet,xt=function(){const t=l(this,W,gt).call(this);this.set(t.x,t.y,d.Blank)},N=new WeakSet,pt=function(t){this.changed.forEach(e=>{this.boxes.get(e.x,e.y).draw(t,{x:this.topLeft.x+(e.x-1)*this.spacing+1,y:this.topLeft.y+(e.y-1)*this.spacing+1},this.spacing-2)}),this.changed.length=0},j=new WeakSet,Ct=function(t){const e=this.positionToCoord({x:t.mouse.x,y:t.mouse.y});if(e!==null){const i=this.get(e.x,e.y);i.type!==t.drawType&&i.type!==2&&i.type!==3&&(t.drawType===d.Start&&l(this,L,yt).call(this),t.drawType===d.End&&l(this,v,xt).call(this),this.set(e.x,e.y,t.drawType))}},F=new WeakSet,mt=function(t){this.clearAll();for(let e=1;e<=this.dimensions.cols;e++)for(let i=1;i<=this.dimensions.rows;i++){const s=this.get(e,i).type;if(s===d.Start||s===d.End)continue;Math.random()<t?this.set(e,i,d.Blank):this.set(e,i,d.Barrier)}},O=new WeakSet,kt=function(){for(let t=1;t<=this.dimensions.cols;t++)for(let e=1;e<=this.dimensions.rows;e++){const i=this.get(t,e).type;(i===d.Path||i===d.Success)&&this.set(t,e,d.Blank)}},D=new WeakSet,bt=function(){for(let t=1;t<=this.dimensions.cols;t++)for(let e=1;e<=this.dimensions.rows;e++){const i=this.get(t,e).type;(i===d.Barrier||i===d.Path||i===d.Success)&&this.set(t,e,d.Blank)}},I=new WeakSet,Pt=function(){for(let t=1;t<=this.dimensions.cols;t++)for(let e=1;e<=this.dimensions.rows;e++)if(this.get(t,e).type===d.Start)return new c(t,e);throw"No Start Position"};var R,Et;class lt{constructor(t,e){r(this,R);o(this,"values");o(this,"dimensions");this.values=new Array(t.cols*t.rows),this.dimensions=t,l(this,R,Et).call(this,e)}get(t,e){return this.values[t+e*this.dimensions.cols]}set(t,e,i){this.values[t+e*this.dimensions.cols]=i}}R=new WeakSet,Et=function(t){for(let e=0;e<this.dimensions.cols*this.dimensions.rows;e++)this.values[e]=t};class Vt{constructor(t){o(this,"boxes");this.boxes=new lt(t,new at)}get(t,e){return this.boxes.get(t-1,e-1)}set(t,e,i){this.boxes.set(t-1,e-1,new at(i))}}class ct{constructor(t){o(this,"start");o(this,"end");this.start=new c(t.start),this.end=new c(t.end)}get(){return{start:this.start,end:this.end}}}var q,St,$,Mt,X,zt,Y,Ht,K,Bt,G,At,J,Wt,Q,Tt,U,Lt,Z,vt,V,Nt;class x{static create(t){return l(this,q,St).call(this,t.dimensions,t.canvasSize)}}q=new WeakSet,St=function(t,e){t=l(this,K,Bt).call(this,t);const i=l(this,G,At).call(this,e),s=l(this,J,Wt).call(this,t,e),n=l(this,Q,Tt).call(this,t,s,i),f=l(this,U,Lt).call(this,t,s,n),g=new Vt(t),Kt=l(this,$,Mt).call(this,s,n),Gt=l(this,X,zt).call(this,s,n,t);return new Zt({dimensions:t,topLeft:n,gridLines:f,boxes:g,spacing:s,coordToPosition:Kt,positionToCoord:Gt})},$=new WeakSet,Mt=function(t,e){const i=t/2;return s=>({x:e.x+i+t*(s.x-1),y:e.y+i+t*(s.y-1)})},X=new WeakSet,zt=function(t,e,i){return s=>l(this,Y,Ht).call(this,s,e,i,t)?{x:Math.ceil((s.x-e.x)/t),y:Math.ceil((s.y-e.y)/t)}:null},Y=new WeakSet,Ht=function(t,e,i,s){return t.x>e.x&&t.y>e.y&&t.x<e.x+i.cols*s&&t.y<e.y+i.rows*s},K=new WeakSet,Bt=function(t){return{cols:Math.min(t.cols,300),rows:Math.min(t.rows,180)}},G=new WeakSet,At=function(t){return new c(t.width/2,t.height/2)},J=new WeakSet,Wt=function(t,e,i=.99){const s=Math.ceil(e.width*i),n=Math.ceil(e.height*i),f=Math.ceil((s-t.cols)/t.cols),g=Math.ceil((n-t.rows)/t.rows);return Math.min(f,g)},Q=new WeakSet,Tt=function(t,e,i){return new c({x:Math.round(i.x-t.cols*e/2),y:Math.round(i.y-t.rows*e/2)})},U=new WeakSet,Lt=function(t,e,i){const s=[],n=l(this,V,Nt).call(this,t,e),f=l(this,Z,vt).call(this,t,e);for(let g=0;g<=t.cols;g++)s.push(new ct({start:new c({x:i.x+g*e,y:i.y}),end:new c({x:i.x+g*e,y:i.y+n})}));for(let g=0;g<=t.rows;g++)s.push(new ct({start:new c({x:i.x,y:i.y+g*e}),end:new c({x:i.x+f,y:i.y+g*e})}));return s},Z=new WeakSet,vt=function(t,e){return t.cols*e},V=new WeakSet,Nt=function(t,e){return t.rows*e},r(x,q),r(x,$),r(x,X),r(x,Y),r(x,K),r(x,G),r(x,J),r(x,Q),r(x,U),r(x,Z),r(x,V);class _t{constructor({cols:t,rows:e}){o(this,"mouse");o(this,"grid");o(this,"drawType");o(this,"createPath");o(this,"frame");o(this,"resetPath");o(this,"resetAll");o(this,"randomise");o(this,"diagonals");this.mouse={x:0,y:0,leftClick:!1},this.grid={cols:t,rows:e,changed:!1},this.drawType=d.Blank,this.createPath=!1,this.frame=0,this.resetPath=!1,this.resetAll=!1,this.randomise=!1,this.diagonals=!1}updateMousePosition(t){this.mouse.x=t.clientX,this.mouse.y=t.clientY}incrementFrame(){this.frame++}}var C,S,z,m,_,Ft,tt,Ot,et,Dt;class jt{constructor(t){r(this,_);r(this,tt);r(this,et);r(this,C,void 0);o(this,"pathFound");r(this,S,void 0);r(this,z,void 0);r(this,m,void 0);b(this,C,new lt(t,0)),this.pathFound=!1,b(this,S,!1),b(this,z,t),b(this,m,[])}createNextStep(t,e){if(!y(this,S)){const n=t.getStart();y(this,C).set(n.x-1,n.y-1,1),y(this,m).push(n),b(this,S,!0)}const i=[],s=l(this,et,Dt).call(this,e);y(this,m).forEach(n=>{this.pathFound||s.forEach(f=>{l(this,_,Ft).call(this,t,n.copy(),c.add(n,f),i)})}),this.pathFound?y(this,m).length=0:b(this,m,i)}reset(){b(this,C,new lt(y(this,z),0)),this.pathFound=!1,y(this,m).length=0,b(this,S,!1)}noPath(){return y(this,m).length===0&&!this.pathFound}}C=new WeakMap,S=new WeakMap,z=new WeakMap,m=new WeakMap,_=new WeakSet,Ft=function(t,e,i,s){if(y(this,C).get(i.x-1,i.y-1)!==0)return;const n=l(this,tt,Ot).call(this,t,i);if(n===1){y(this,C).set(i.x-1,i.y-1,e),t.set(i.x,i.y,d.Path),s.push(i);return}else if(n===2){this.pathFound=!0;let f=e;for(;y(this,C).get(f.x-1,f.y-1)!==1;)t.set(f.x,f.y,d.Success),f=y(this,C).get(f.x-1,f.y-1)}},tt=new WeakSet,Ot=function(t,e){return e.x<1||e.x>t.dimensions.cols||e.y<1||e.y>t.dimensions.rows?0:t.get(e.x,e.y).type===d.Blank?1:t.get(e.x,e.y).type===d.End?2:0},et=new WeakSet,Dt=function(t){const e=[{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:-1,y:0}];return t&&e.push({x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1}),e};var it,It,st,Rt,ht,qt;class p{constructor(t){r(this,it);r(this,st);r(this,ht);o(this,"size");o(this,"position");o(this,"text");o(this,"fillColour");o(this,"strokeColour");o(this,"selected");o(this,"action");o(this,"update");this.size=t.size,this.position=t.position,this.text=t.text,this.fillColour=t.fillColour,this.selected=t.selected,this.action=t.action,this.update=t.update,this.strokeColour="black",this.update()}draw(t){l(this,it,It).call(this,t),l(this,st,Rt).call(this,t)}checkClick(t){l(this,ht,qt).call(this,t)&&this.action()}}it=new WeakSet,It=function(t){t.beginPath(),t.fillStyle=this.fillColour,t.fillRect(this.position.x,this.position.y,this.size.width,this.size.height),t.stroke(),t.lineWidth=2,t.strokeStyle=this.strokeColour,t.strokeRect(this.position.x,this.position.y,this.size.width,this.size.height),t.stroke()},st=new WeakSet,Rt=function(t){t.font="30px Arial",t.fillStyle="black",t.textAlign="center",t.fillText(this.text,this.position.x+this.size.width/2,this.position.y+this.size.height*.7)},ht=new WeakSet,qt=function(t){return t.x>this.position.x&&t.x<this.position.x+this.size.width&&t.y>this.position.y&&t.y<this.position.y+this.size.height};var ot,$t;const u=class{static setup(t,e){const i=[];return i.push(new p({size:{width:u.buttonWidth,height:u.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Begin",fillColour:"gray",selected:!1,action:function(){e.createPath=!e.createPath,this.update()},update:function(){e.createPath?(this.text="Pause",this.strokeColour="white",this.fillColour="darkgray"):(this.text="Begin",this.strokeColour="black",this.fillColour="gray")}})),i.push(new p({size:{width:u.buttonWidth,height:u.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Clear Path",fillColour:"gray",selected:!1,action:function(){e.resetPath=!0},update:function(){}})),i.push(new p({size:{width:u.buttonWidth,height:u.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Clear All",fillColour:"gray",selected:!1,action:function(){e.resetAll=!0},update:function(){}})),i.push(new p({size:{width:u.buttonWidth,height:u.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Place Start",fillColour:"green",selected:!1,action:function(){this.selected=!0,e.drawType=d.Start,this.update()},update:function(){this.strokeColour=this.selected?"white":"black",this.fillColour=this.selected?"lightgreen":"green",this.selected&&i.forEach(s=>{this!==s&&(s.selected=!1,s.update())})}})),i.push(new p({size:{width:u.buttonWidth,height:u.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Place End",fillColour:"red",selected:!1,action:function(){this.selected=!0,e.drawType=d.End,this.update()},update:function(){this.strokeColour=this.selected?"white":"black",this.fillColour=this.selected?"#FF6060":"red",this.selected&&i.forEach(s=>{this!==s&&(s.selected=!1,s.update())})}})),i.push(new p({size:{width:u.buttonWidth,height:u.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Draw Barriers",fillColour:"gray",selected:!1,action:function(){this.selected=!0,e.drawType=d.Barrier,this.update()},update:function(){this.strokeColour=this.selected?"white":"black",this.fillColour=this.selected?"darkgray":"gray",this.selected&&i.forEach(s=>{this!==s&&(s.selected=!1,s.update())})}})),i[i.length-1].action(),i.push(new p({size:{width:u.buttonWidth,height:u.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Erase Barriers",fillColour:"gray",selected:!1,action:function(){this.selected=!0,e.drawType=d.Blank,this.update()},update:function(){this.strokeColour=this.selected?"white":"black",this.fillColour=this.selected?"darkgray":"gray",this.selected&&i.forEach(s=>{this!==s&&(s.selected=!1,s.update())})}})),i.push(new p({size:{width:u.buttonWidth,height:u.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Randomise",fillColour:"gray",selected:!1,action:function(){e.randomise=!0},update:function(){}})),i.push(new p({size:{width:u.buttonWidth,height:u.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Diagonals",fillColour:"gray",selected:!1,action:function(){e.diagonals=!e.diagonals,this.update()},update:function(){e.diagonals?(this.strokeColour="white",this.fillColour="darkgray"):(this.strokeColour="black",this.fillColour="gray")}})),i.push(new p({size:{width:u.buttonWidth,height:u.buttonHeight},position:new c({x:t.width-240,y:0}),text:"Size",fillColour:"gray",selected:!1,action:function(){},update:function(){}})),i.push(new p({size:{width:u.buttonWidth,height:u.buttonHeight},position:new c({x:t.width-240,y:0}),text:`-  ${e.grid.cols}x${e.grid.rows}  +`,fillColour:"gray",selected:!1,action:function(){e.mouse.x>=this.position.x+this.size.width/2?e.grid.cols<300&&(e.grid.cols+=15,e.grid.rows+=9,e.grid.changed=!0):e.grid.cols>15&&(e.grid.cols-=15,e.grid.rows-=9,e.grid.changed=!0),this.update()},update:function(){this.text=`-  ${e.grid.cols}x${e.grid.rows}  +`}})),l(this,ot,$t).call(this,i,t),i}};let E=u;ot=new WeakSet,$t=function(t,e){const i=Math.floor(e.height/2),s=t.length/2,n=u.buttonHeight+u.offset;t.forEach((f,g)=>{f.position.y=i-(s-g)*n})},r(E,ot),o(E,"buttonHeight",50),o(E,"buttonWidth",200),o(E,"offset",10);class te{constructor(t,e){o(this,"buttons");this.buttons=E.setup(t,e)}updateButtons(){this.buttons.forEach(t=>{t.update()})}drawButtons(t){this.buttons.forEach(e=>{e.draw(t)})}checkClick(t){this.buttons.forEach(e=>{e.checkClick(t)})}}const k=new Ut({size:{height:innerHeight,width:innerWidth},id:"canvas"}),a=new _t({cols:150,rows:90});let w=x.create({dimensions:{cols:a.grid.cols,rows:a.grid.rows},canvasSize:{width:k.getSize().width-250,height:k.getSize().height}}),P=new jt(w.dimensions);const M=new te(k.getSize(),a);function Xt(){k.clear(),w.drawLines(k.getCtx())}function Yt(){if(a.grid.changed&&(w=x.create({dimensions:{cols:a.grid.cols,rows:a.grid.rows},canvasSize:{width:k.getSize().width-250,height:k.getSize().height}}),P=new jt(w.dimensions),a.grid.changed=!1,Xt(),M.drawButtons(k.getCtx())),a.randomise){const h=a.diagonals?.41:.59;for(nt(),w.randomiseBarriers(h);!ie(w);)P.reset(),w.resetChanged(),w.randomiseBarriers(h);a.randomise=!1,a.resetPath=!0}a.mouse.leftClick&&!a.createPath&&!P.pathFound&&w.editGrid(a),a.resetPath&&(w.clearPath(),nt(),a.resetPath=!1),a.resetAll&&(w.clearAll(),nt(),a.resetAll=!1),a.frame%5===0&&(a.createPath&&(P.pathFound?(a.createPath=!1,M.updateButtons()):P.createNextStep(w,a.diagonals)),w.drawChanged(k.getCtx()),M.drawButtons(k.getCtx())),a.incrementFrame(),requestAnimationFrame(Yt)}function nt(){P.reset(),a.createPath=!1,M.updateButtons()}function ee(){w.positionToCoord(a.mouse)!==null?a.mouse.leftClick=!0:M.checkClick(a.mouse)}function ie(h){for(a.createPath=!0;!P.pathFound;)if(P.createNextStep(h,a.diagonals),P.noPath())return!1;return a.createPath=!1,!0}Xt();Yt();document.addEventListener("mousedown",()=>{ee()});document.addEventListener("mouseup",()=>{a.mouse.leftClick=!1});document.addEventListener("mousemove",h=>{a.updateMousePosition(h)});
